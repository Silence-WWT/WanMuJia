{% extends "vendor/nav_midd.html" %} {% block styles %}<link rel=stylesheet href=/lib/xenon/js/datatables/dataTables.bootstrap.css>{% endblock %} {% block isDistributors -%} opened active {%- endblock %} {% block isDistributors_li -%} active {%- endblock %} {% block s_isDistributors -%} opened active {%- endblock %} {% block s_isDistributors_li -%} active {%- endblock %} {% block main_content %}<div class=page-title data-page=distributors><div class=title-env><h1 class=title>商家列表</h1></div><div class=breadcrumb-env><ol class="breadcrumb bc-1"><li><a href=/vendor><i class=fa-home></i>概览</a></li><li><a href=/vendor/distributors>商家管理</a></li><li class=active><strong>商家列表</strong></li></ol></div></div><div class="panel panel-default"><div class=panel-heading><h3 class=panel-title>已授权商家列表</h3><div class=panel-options><a class=new-item href=/vendor/distributors/invitation><i class=fa-plus-circle></i> <span class=title>邀请商家</span></a></div></div><div class=panel-body><script type=text/javascript>
                jQuery(document).ready(function($)
                {
                    $("#distributors").dataTable({
                        aLengthMenu: [
                            [10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]
                        ],
                        language: {
                            "sProcessing":   "处理中...",
                            "sLengthMenu":   "显示 _MENU_ 项结果",
                            "sZeroRecords":  "没有匹配结果",
                            "sInfo":         "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
                            "sInfoEmpty":    "显示第 0 至 0 项结果，共 0 项",
                            "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
                            "sInfoPostFix":  "",
                            "sSearch":       "搜索:",
                            "sUrl":          "",
                            "sEmptyTable":     "表中数据为空",
                            "sLoadingRecords": "载入中...",
                            "sInfoThousands":  ",",
                            "oPaginate": {
                                "sFirst":    "首页",
                                "sPrevious": "上页",
                                "sNext":     "下页",
                                "sLast":     "末页"
                            },
                            "oAria": {
                                "sSortAscending":  ": 以升序排列此列",
                                "sSortDescending": ": 以降序排列此列"
                            }
                        },
                        processing: true,
                        serverSide: true,
                        ajax: "/vendor/distributors/datatable",
                        columns: [
                            {data: "id", bSortable: false, visible: false},
                            {data: "name", bSortable: false},
                            {data: "address", bSortable: false},
                            {data: "contact_mobile", bSortable: false},
                            {data: "contact", bSortable: false},
                            {data: "created", bSortable: false}
                        ],
                        columnDefs: [{
                            targets: [6],
                            data: "id",
                            render: function (id) {
                                return "<a data-toggle='modal' data-target='#revocation-modal' data-dist-id='" + id + "'" + " href='#'>取消授权</a>"
                            }
                        }]
                    });
                });
            </script><table id=distributors class="table table-striped table-bordered" cellspacing=0 width=100%><thead><tr><th>id</th><th>名称</th><th>地址</th><th>联系电话/手机</th><th>联系人</th><th>授权时间</th><th>操作</th></tr></thead><tfoot><tr><th>id</th><th>名称</th><th>地址</th><th>联系电话/手机</th><th>联系人</th><th>授权时间</th><th>操作</th></tr></tfoot><tbody></tbody></table></div></div>{% endblock %} {% block modal %}<div class="modal fade" id=revocation-modal data-backdrop=static><div class=modal-dialog><div class=modal-content><form id=contract-form method=post action=/vendor/distributors/0/revocation class=validate>{{ form.csrf_token }}<div class=modal-header><h4 class=modal-title>上传解约合同</h4></div><div class=modal-body><div class="form-group required"><label for=contract class=control-label>解约合同</label> <input id=contract name=contract class=form-control type=file accept="image/jpeg, image/png" data-validate=required data-message-required=请上传解约合同></div></div><div class=modal-footer><button type=submit class="btn btn-danger">确认</button> <button type=button class="btn btn-white" data-dismiss=modal>取消</button></div></form></div></div></div>{% endblock %} {% block scripts %}<script src=/lib/xenon/js/jquery-validate/jquery.validate.min.js></script><script src=/lib/xenon/js/datatables/js/jquery.dataTables.min.js></script><script src=/lib/xenon/js/datatables/dataTables.bootstrap.js></script><script src=/lib/xenon/js/datatables/yadcf/jquery.dataTables.yadcf.js></script><script src=/lib/xenon/js/datatables/tabletools/dataTables.tableTools.min.js></script>{% endblock %}