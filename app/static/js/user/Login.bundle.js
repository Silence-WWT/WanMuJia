webpackJsonp([8],{0:function(e,a,n){"use strict";n(330),n(331),n(7);var m=(n(8),n(17)),t=n(174),i=n(186),r=m.createClass({displayName:"LoginWrap",render:function(){return m.createElement("div",{className:"login-wrap"},m.createElement(i,{nextUrl:"/"}))}});t.render(m.createElement(r,null),document.getElementById("box"))},7:function(e,a,n){e.exports=n.p+"img/user/favicon.png"},186:function(e,a,n){"use strict";n(187);var m=n(17),t=n(181),i=n(8),r=i.encryptMd5,l=i.getCookie,o=m.createClass({displayName:"LoginIn",getInitialState:function(){return{user:"",userErrTip:"",psw:"",pswErrTip:"",nextErrTip:"",remd:!0,nextAction:!0}},setUser:function(e){this.setState({user:e})},setPsw:function(e){this.setState({psw:e})},setRemd:function(){this.setState({remd:!this.state.remd})},clear:function(e,a){switch(e){case"user":this.setState({userErrTip:"",nextErrTip:""}),a||this.setState({user:""});break;case"psw":this.setState({pswErrTip:"",nextErrTip:""}),a||this.setState({psw:""});break;default:return}},doNext:function(){return this.state.user?this.state.psw?this.state.userErrTip||this.state.pswErrTip?!1:(this.setState({nextAction:!1}),void t({url:"/login",method:"post",data:{username:this.state.user,password:r(this.state.psw),remember:this.state.remd,csrf_token:l("csrf_token")},success:function(e){return e.success?(this.setState({nextErrTip:"登录成功"}),this.props.nextUrl?void(window.location.href=this.props.nextUrl):void window.location.reload()):(this.setState({nextErrTip:e.message}),void this.setState({nextAction:!0}))}.bind(this),error:function(e){this.setState({nextErrTip:"服务器出错"}),this.setState({nextAction:!0})}.bind(this)})):(this.setState({pswErrTip:"请输入密码"}),!1):(this.setState({userErrTip:"请输入 邮箱/手机号/用户名"}),!1)},handleKeyUp:function(e){"Enter"==e.key&&this.doNext()},render:function(){return m.createElement("div",{className:"login-box",onKeyUp:this.handleKeyUp},m.createElement("div",{className:"header-logo"},m.createElement("div",{className:"logo"})),m.createElement(s,{setValue:this.setUser,value:this.state.user,errTip:this.state.userErrTip,clear:this.clear}),m.createElement(c,{setValue:this.setPsw,value:this.state.psw,errTip:this.state.pswErrTip,clear:this.clear}),m.createElement(p,{setValue:this.setRemd,remd:this.state.remd}),m.createElement(d,{next:this.doNext,nextAction:this.state.nextAction,errTip:this.state.nextErrTip}))}}),s=m.createClass({displayName:"UserInputGroup",handleChange:function(e){this.props.setValue(e.target.value)},render:function(){var e=this.props.errTip,a=document.createElement("input"),n="placeholder"in a;return m.createElement("div",{className:(e.length?"err ":"")+"input-group"},m.createElement("input",{onChange:this.handleChange,onFocus:this.props.clear.bind(null,"user",1),value:this.props.value,autoFocus:!0,type:"text",className:"ipt",defaultValue:n?null:"邮箱/手机号/用户名",placeholder:"邮箱/手机号/用户名"}),m.createElement("span",{onClick:this.props.clear.bind(null,"user",0),className:"del-icon"},"+"),m.createElement("div",{className:"tip err"},e))}}),c=m.createClass({displayName:"PseInputGroup",handleChange:function(e){this.props.setValue(e.target.value)},render:function(){var e=this.props.errTip,a=document.createElement("input"),n="placeholder"in a;return m.createElement("div",{className:(e.length?"err ":"")+"input-group"},m.createElement("input",{onChange:this.handleChange,onFocus:this.props.clear.bind(null,"psw",1),value:this.props.value,type:"password",className:"ipt",defaultValue:n?null:"密码",placeholder:"密码"}),m.createElement("span",{onClick:this.props.clear.bind(null,"psw",0),className:"del-icon"},"+"),m.createElement("div",{className:"tip err"},e))}}),p=m.createClass({displayName:"RemdLoginGroup",render:function(){return m.createElement("div",{className:"input-group remd"},m.createElement("input",{type:"checkbox",className:"remd",name:"remd",id:"remd"}),m.createElement("label",{onClick:this.props.setValue,className:(this.props.remd?"checked ":"")+"check",htmlFor:"remd"}),m.createElement("label",{className:"instruct",htmlFor:"remd"},"自动登录"),m.createElement("div",{className:"a-group"},m.createElement("a",{href:"/reset_password"},"忘记密码"),"|",m.createElement("a",{href:"/register"},"免费注册")),m.createElement("div",{className:"tip err"}))}}),d=m.createClass({displayName:"NextButton",render:function(){var e=this.props.errTip;return m.createElement("div",{className:(e.length?"err ":"")+"input-group"},m.createElement("input",{disabled:!this.props.nextAction,onClick:this.props.next,type:"button",value:"完成",className:"next"}),m.createElement("div",{className:"tip err"},e))}});e.exports=o},187:function(e,a,n){var m=n(188);"string"==typeof m&&(m=[[e.id,m,""]]);n(6)(m,{singleton:!1});m.locals&&(e.exports=m.locals)},188:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,".login-box{width:100%;height:auto;background:#fff;border:1px solid #e6e6e6;box-shadow:0 0 3px #ccc;padding-bottom:20px}.login-box .header-logo{height:150px;margin-bottom:10px;position:relative}.login-box .header-logo .logo{width:150px;height:75px;background:url("+n(189)+") center no-repeat;background-size:100% auto;position:absolute;top:45px;left:50%;margin-left:-75px}.login-box .input-group{position:relative;width:362px;margin:0 auto;padding-bottom:30px}.login-box .input-group input{font-size:15px;outline:none}.login-box .input-group .ipt{width:362px;height:38px;line-height:36px;padding-left:8px;border:1px solid #ccc}.login-box .input-group .del-icon{display:none;position:absolute;font-size:14px;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);text-align:center;background:#6e3800;color:#fff;width:12px;height:12px;line-height:10px;border-radius:12px;top:13px;left:336px;cursor:pointer}.login-box .input-group .tip{position:absolute;display:none;font-size:13px}.login-box .input-group.err .ipt{border-color:#6e3800}.login-box .input-group.err .del-icon{display:block}.login-box .input-group.err .tip{display:block;color:#6e3800;line-height:30px;padding-left:8px}.login-box .next{width:362px;height:40px;margin-top:10px;border:none;text-align:center;font-size:16px;color:#fff;background:#6e3800;cursor:pointer}.login-box .input-group.remd{margin-top:0;padding-bottom:2px}.login-box .input-group.remd #remd{display:none}.login-box .input-group.remd .check{float:left;width:14px;height:14px;border:2px solid #6e3800;cursor:pointer;position:relative;top:6px;margin:0 10px 0 0}.login-box .input-group.remd .check.checked:after{display:block;content:'\\2714';font-size:12px;line-height:12px;text-align:center;background:#6e3800;color:#fff}.login-box .input-group.remd .instruct{font-size:14px;color:#999}.login-box .input-group.remd .a-group{float:right;font-size:14px;margin-top:2px}.login-box .input-group.remd .a-group a{color:#999}",""])},330:function(e,a,n){e.exports=n.p+"../templates/user/login.html"},331:function(e,a,n){var m=n(332);"string"==typeof m&&(m=[[e.id,m,""]]);n(6)(m,{singleton:!1});m.locals&&(e.exports=m.locals)},332:function(e,a,n){a=e.exports=n(4)(),a.push([e.id,"a{color:#833e00}a:hover{color:#5a2b00}.wrapper{margin:0 auto;width:1200px}body{background:#f0f0f0}.login-wrap{width:900px;height:auto;margin:0 auto;margin-top:100px}",""])}});